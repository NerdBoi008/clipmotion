# Contributing to ClipMotion

Thanks for your interest in contributing to **ClipMotion**!  
ClipMotion is a community-driven CLI that turns animations from real-world videos (Instagram, TikTok, YouTube, etc.) into reusable components for web frameworks.

This guide explains how to set up the repo, add new components, and improve the tool.

***

## ğŸ‘€ What You Can Contribute

- New animation components (from reels/videos)
- Better implementations (performance, accessibility, cleanup)
- Support for more frameworks/libraries
- Improvements to the CLI (init/add/find/create/registry:build)
- Documentation, examples, and demos
- Bug fixes and DX improvements

***

## ğŸ§© Project Structure

Key folders:

```txt
clipmotion/
â”œâ”€â”€ commands/                 # CLI commands (init, add, find, create,registry-build)
â”œâ”€â”€ registry/                 # Source components for the registry
â”‚   â”œâ”€â”€ nextjs/
â”‚   â”‚   â”œâ”€â”€ ui/              # Next.js components
â”‚   â”‚   â”œâ”€â”€ lib/             # Internal utilities (optional)
â”‚   â”‚   â””â”€â”€ hooks/           # Hooks (optional)
â”‚   â”œâ”€â”€ react/
â”‚   â”œâ”€â”€ vue/
â”‚   â””â”€â”€ angular/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ r/                   # Built registry JSON files (generated)
â”œâ”€â”€ cli.ts / index.ts        # CLI entry
â””â”€â”€ package.json
```

- **Source components live in `registry/<framework>/ui`**  
- **The CLI installs from JSON registry files in `public/r`**, generated by `registry:build`.

***

## âœ… Prerequisites

- Node.js LTS (18+ recommended)
- pnpm / npm / yarn (any supported by the project)
- Git

***

## ğŸš€ Local Setup

```bash
# 1. Fork & clone
git clone https://github.com/nerdboi008/clipmotion.git
cd clipmotion

# 2. Install dependencies
npm install
# or
pnpm install
# or
yarn install

# 3. Link CLI locally
npm link
# now you can run:
clipmotion --help
```

This installs:

- CLI dependencies (commander, chalk, ora, etc.)
- Component dependencies (next, react, vue, etc.) as **devDependencies**

**Note:** These dev dependencies are NOT included in the published CLI package. They're only used for:

- Type checking registry components
- IDE autocomplete
- Development experience

When users run `clipmotion add`, dependencies are installed fresh in their project from the registry JSON metadata.

***

## ğŸ§± Adding a New Component (Recommended Flow)

The easiest way to contribute is to add a new animation component based on a video.

### Config Structure

When you run `clipmotion init`, it creates a config with paths optimized to avoid conflicts:

```json
{
  "framework": "nextjs",
  "aliases": {
    "components": "components",
    "utils": "components/utils"  // Inside components to avoid lib/utils conflicts
  }
}
```

**Why utils inside components?**  
Many projects already have `lib/utils` or `src/lib/utils` files. Placing ClipMotion utilities inside the components folder prevents accidental overwrites.

### 1. Use the `create` command

```bash
clipmotion create <component-name>
# example:
clipmotion create blur-image-toggle
```

The CLI will ask you for:

- Framework (Next.js, React, Vue, Angular)
- Source video URL (Instagram / TikTok / YouTube, etc.)
- Description
- Category
- Difficulty (easy / medium / hard)

It will scaffold:

```txt
registry/<framework>/
â”œâ”€â”€ ui/<component-name>.tsx/.vue    # Component stub
â”œâ”€â”€ examples/<component-name>.tsx   # Example usage
â””â”€â”€ <component-name>.README.md      # Docs stub
```

### 2. Implement the animation

- Open the generated component in `registry/<framework>/ui/<component-name>.*`
- Implement the actual animation based on the video
- Keep it:
  - **Framework-idiomatic**
  - **Performant**
  - **Accessible (focus states, reduced motion where relevant)**

### 3. Run & test locally

If you have example playgrounds configured, use them (adjust command to your setup):

```bash
# Example: run dev and open the example
npm run dev
# or run whatever dev script the repo uses for examples
```

Make sure:

- No TypeScript errors
- No runtime errors
- Works on different viewport sizes
- Animations feel smooth

### 4. Build the registry

```bash
clipmotion registry:build
# or via npm script, if set:
npm run registry:build
```

This:

- Scans `registry/`
- Generates JSON files under `public/r/<framework>/*.json`
- Creates/updates `public/r/index.json` for the `find` command

### 5. Try installing your component via CLI

In a **separate test project**:

```bash
clipmotion init
clipmotion add <component-name>
```

Verify the component:

- Installs in the expected path (`clipmotion-components.json` aliases)
- Compiles and runs
- Has correct dependencies

***

## ğŸ” Mapping Video â†’ Component (Registry / find Command)

The `find` command relies on registry metadata (like `index.json`).  
If you maintain a mapping of video URLs to components, please:

- Add/update the relevant entry in the registry index (or a `registry.json` if one exists)
- Include:
  - `id` (component name)
  - `name`
  - `description`
  - `sources` (array of video URLs)
  - `libraries` (frameworks supported)
  - `difficulty`, `tags`, etc.

This allows:

```bash
clipmotion find https://www.instagram.com/p/XXXXX/
```

to point to your new component and let users install it easily.

***

## ğŸ”§ Working on the CLI Itself

You can also contribute to commands:

- `init` â€“ project config detection, aliases, registry URL
- `add` â€“ install components & dependencies
- `find` â€“ map video URLs to registry entries
- `create` â€“ scaffolding for contributors
- `registry:build` â€“ building JSON from source files

Guidelines:

- Keep UX simple and clear
- Handle errors gracefully
- Support `--debug` for more verbose logging
- Avoid breaking existing flags without a good reason

***

## ğŸ§ª Coding & Style Guidelines

- Use TypeScript where possible
- Keep functions small and focused
- Prefer pure functions for parsing / transformations
- Add types/interfaces for shared structures (`RegistryItem`, `ComponentConfig`, etc.)
- Use consistent naming:
  - Files in `ui/` â†’ kebab-case (e.g., `blur-image-toggle.tsx`)
  - Components â†’ PascalCase (e.g., `BlurImageToggle`)

***

## ğŸ§¾ Commit & PR Process

1. **Create a branch**:

```bash
git checkout -b feat/blur-image-toggle
```

2. **Commit with a clear message**:

```bash
git commit -m "feat: add blur image toggle animation for nextjs"
```

3. **Push and open PR**:

- Push to your fork
- Open a pull request to the main repo
- In the PR description:
  - Link the source video
  - Explain what the component does
  - Mention which framework(s) you implemented
  - Add screenshots or GIFs if possible

***

## âœ… PR Checklist

Before submitting:

- [ ] Code compiles without errors
- [ ] `clipmotion registry:build` succeeds
- [ ] New component works via `clipmotion add <name>`
- [ ] No obvious performance issues
- [ ] No unused imports or dead code
- [ ] Documentation (`README` or comments) is updated
- [ ] Component name is clear and consistent

***

## ğŸ’¬ Questions / Ideas

If you have:

- A new idea for a command (`clipmotion something`)
- A suggestion for how to better structure the registry
- Thoughts on supporting more libraries (GSAP, Three.js, WebGL, etc.)

Open:

- A **GitHub Discussion** for brainstorming, or  
- A **GitHub Issue** if itâ€™s concrete and actionable

***

Thanks again for contributing to ClipMotion.  
Youâ€™re helping turn the coolest animations from the internet into reusable building blocks for everyone.
