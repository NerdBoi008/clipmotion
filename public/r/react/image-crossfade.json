{
  "name": "image-crossfade",
  "type": "registry:component",
  "description": "Smooth image crossfade effect on click",
  "files": [
    {
      "name": "image-crossfade.tsx",
      "content": "/**\r\n * @description Smooth image crossfade effect on click\r\n * @category Click Interactions\r\n * @source \"https://www.instagram.com/p/DRPOaKMiItG\"\r\n * @author NerdBoi008\r\n * @github https://github.com/nerdboi008\r\n * @x https://x.com/moin_malek_\r\n */\r\n\r\nimport React, { useRef, useEffect } from \"react\";\r\nimport { cn } from \"@/components/utils\";\r\n\r\nexport interface ToggleImgProps {\r\n  from: string;\r\n  to: string;\r\n  isDark: boolean;\r\n  duration?: number;\r\n  altFrom?: string;\r\n  altTo?: string;\r\n  objectFit?: \"cover\" | \"contain\" | \"fill\" | \"none\" | \"scale-down\";\r\n  className?: string;\r\n  imageWrapperClassName?: string;\r\n  width?: number | string;\r\n  height?: number | string;\r\n  lazyLoad?: boolean;\r\n  onTransitionStart?: () => void;\r\n  onTransitionEnd?: () => void;\r\n}\r\n\r\nconst ImageCrossfade: React.FC<ToggleImgProps> = ({\r\n  from,\r\n  to,\r\n  isDark,\r\n  duration = 700,\r\n  altFrom = \"Image From\",\r\n  altTo = \"Image To\",\r\n  objectFit = \"cover\",\r\n  className,\r\n  imageWrapperClassName,\r\n  width = \"100%\",\r\n  height = 256,\r\n  lazyLoad = true,\r\n  onTransitionStart,\r\n  onTransitionEnd,\r\n}) => {\r\n  const transitionTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n  const prevIsDarkRef = useRef(isDark);\r\n  const isInitialMountRef = useRef(true);\r\n\r\n  useEffect(() => {\r\n    if (isInitialMountRef.current) {\r\n      isInitialMountRef.current = false;\r\n      return;\r\n    }\r\n\r\n    if (prevIsDarkRef.current !== isDark) {\r\n      onTransitionStart?.();\r\n\r\n      if (transitionTimerRef.current) {\r\n        clearTimeout(transitionTimerRef.current);\r\n      }\r\n\r\n      transitionTimerRef.current = setTimeout(() => {\r\n        onTransitionEnd?.();\r\n      }, duration);\r\n\r\n      prevIsDarkRef.current = isDark;\r\n    }\r\n\r\n    return () => {\r\n      if (transitionTimerRef.current) {\r\n        clearTimeout(transitionTimerRef.current);\r\n      }\r\n    };\r\n  }, [isDark, duration, onTransitionStart, onTransitionEnd]);\r\n\r\n  const containerStyle: React.CSSProperties = {\r\n    width,\r\n    height,\r\n    position: \"relative\",\r\n    overflow: \"hidden\",\r\n  };\r\n\r\n  const imageStyle: React.CSSProperties = {\r\n    objectFit,\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  };\r\n\r\n  const transitionStyle = {\r\n    transitionDuration: `${duration}ms`,\r\n    transitionTimingFunction: \"ease-in-out\",\r\n    transitionProperty: \"opacity\",\r\n  };\r\n\r\n  return (\r\n    <div className={cn(\"toggle-img-container\", className)}>\r\n      <div\r\n        className={cn(\"toggle-img-wrapper\", imageWrapperClassName)}\r\n        style={containerStyle}\r\n        aria-live=\"polite\"\r\n        aria-label={`Showing ${isDark ? altFrom : altTo} image`}\r\n      >\r\n        <img\r\n          src={from}\r\n          alt={altFrom}\r\n          style={{\r\n            ...imageStyle,\r\n            ...transitionStyle,\r\n            opacity: isDark ? 1 : 0,\r\n          }}\r\n          loading={lazyLoad ? \"lazy\" : \"eager\"}\r\n          className=\"toggle-img-base\"\r\n        />\r\n\r\n        <img\r\n          src={to}\r\n          alt={altTo}\r\n          style={{\r\n            ...imageStyle,\r\n            ...transitionStyle,\r\n            opacity: isDark ? 0 : 1,\r\n          }}\r\n          loading={lazyLoad ? \"lazy\" : \"eager\"}\r\n          className=\"toggle-img-toggled\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageCrossfade;\r\n\r\n// Add this to your global CSS for smoother animations:\r\n\r\n// .toggle-img-container {\r\n//   display: inline-block;\r\n//   border-radius: 0.5rem;\r\n//   overflow: hidden;\r\n//   box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\r\n// }\r\n\r\n// .toggle-img-wrapper {\r\n//   position: relative;\r\n// }\r\n\r\n// /* Optimize image rendering */\r\n// .toggle-img-wrapper img {\r\n//   backface-visibility: hidden;\r\n//   -webkit-backface-visibility: hidden;\r\n//   transform: translateZ(0);\r\n//   -webkit-transform: translateZ(0);\r\n// }\r\n"
    }
  ],
  "dependencies": [
    "react"
  ],
  "devDependencies": [],
  "registryDependencies": [
    "utils"
  ],
  "meta": {
    "source": "registry\\react\\ui\\image-crossfade.tsx",
    "category": "Click Interactions",
    "contributor": {
      "name": "NerdBoi008",
      "github": "https://github.com/nerdboi008",
      "x": "https://x.com/moin_malek_"
    }
  }
}