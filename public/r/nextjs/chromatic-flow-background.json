{
  "name": "chromatic-flow-background",
  "type": "registry:component",
  "description": "A flowing, chromatic background that paints dynamic trails as the cursor moves.",
  "files": [
    {
      "name": "chromatic-flow-background.tsx",
      "content": "\"use client\";\r\n\r\nimport { useEffect, useRef, useCallback } from \"react\";\r\nimport { cn } from \"@/components/utils\";\r\n\r\n/**\r\n * @description A flowing, chromatic background that paints dynamic trails as the cursor moves.\r\n * @category Hover Effects\r\n * @source https://www.instagram.com/reel/DSR2twIDEsu\r\n * @author nerdboi008\r\n * @github https://github.com/NerdBoi008\r\n * @x https://x.com/moin_malek_\r\n * @website https://www.nerdboi.online\r\n */\r\n\r\ninterface ChromaticFlowBackgroundProps {\r\n  className?: string;\r\n  lineWidth?: number;\r\n  speed?: number;\r\n  trailLength?: number;\r\n  hueSpeed?: number;\r\n  baseHue?: number;\r\n  saturation?: number;\r\n  lightness?: number;\r\n  opacity?: number;\r\n  fadeTrail?: boolean;\r\n  enabled?: boolean;\r\n}\r\n\r\nexport default function ChromaticFlowBackground({\r\n  className,\r\n  lineWidth = 250,\r\n  speed = 0.12,\r\n  trailLength = 50,\r\n  hueSpeed = 1,\r\n  baseHue = 0,\r\n  saturation = 90,\r\n  lightness = 60,\r\n  opacity = 0.9,\r\n  fadeTrail = true,\r\n  enabled = true,\r\n}: ChromaticFlowBackgroundProps) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const mouse = useRef({ x: 0, y: 0 });\r\n  const trail = useRef<{ x: number; y: number }[]>([]);\r\n  const animationId = useRef<number>(0);\r\n  const globalHue = useRef(0); // Global hue that continuously animates\r\n\r\n  const getContext = useCallback((canvas: HTMLCanvasElement) => {\r\n    const ctx = canvas.getContext(\"2d\");\r\n    if (ctx) {\r\n      ctx.imageSmoothingEnabled = false;\r\n      return ctx;\r\n    }\r\n    return null;\r\n  }, []);\r\n\r\n  const resize = useCallback(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const rect = canvas.getBoundingClientRect();\r\n    canvas.width = rect.width * window.devicePixelRatio;\r\n    canvas.height = rect.height * window.devicePixelRatio;\r\n  }, []);\r\n\r\n  const drawTrail = useCallback((ctx: CanvasRenderingContext2D) => {\r\n    if (!enabled || trail.current.length === 0) return;\r\n\r\n    // Continuous global hue animation\r\n    globalHue.current = (globalHue.current + hueSpeed) % 360;\r\n\r\n    // Fade trail effect\r\n    if (fadeTrail) {\r\n      ctx.fillStyle = `rgba(255, 255, 255, 0.1)`;\r\n      ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n    }\r\n\r\n    ctx.save();\r\n    ctx.lineCap = \"round\";\r\n    ctx.lineJoin = \"round\";\r\n    ctx.lineWidth = lineWidth;\r\n    ctx.shadowBlur = 10;\r\n    ctx.shadowColor = `hsla(${globalHue.current}, ${saturation}%, ${lightness}%, ${opacity})`;\r\n\r\n    ctx.beginPath();\r\n    \r\n    // Draw trail with gradient hues based on globalHue\r\n    trail.current.forEach((point, i) => {\r\n      const trailProgress = (i + 1) / trail.current.length;\r\n      const hueOffset = (trailProgress * 60) % 360; // Rainbow gradient along trail\r\n      const hue = (globalHue.current + hueOffset + baseHue) % 360;\r\n      const alpha = fadeTrail ? trailProgress * opacity : opacity;\r\n      \r\n      ctx.globalAlpha = alpha;\r\n      ctx.strokeStyle = `hsla(${hue}, ${saturation}%, ${lightness}%, ${alpha})`;\r\n      \r\n      if (i === 0) {\r\n        ctx.moveTo(point.x, point.y);\r\n      } else {\r\n        ctx.lineTo(point.x, point.y);\r\n      }\r\n    });\r\n\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }, [enabled, lineWidth, fadeTrail, baseHue, saturation, lightness, opacity, hueSpeed]);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n\r\n    const ctx = getContext(canvas);\r\n    if (!ctx) return;\r\n\r\n    resize();\r\n\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const rect = canvas.getBoundingClientRect();\r\n      mouse.current.x = (e.clientX - rect.left) * window.devicePixelRatio;\r\n      mouse.current.y = (e.clientY - rect.top) * window.devicePixelRatio;\r\n    };\r\n\r\n    window.addEventListener(\"mousemove\", handleMouseMove);\r\n    window.addEventListener(\"resize\", resize);\r\n\r\n    const animate = () => {\r\n      if (!enabled) {\r\n        animationId.current = requestAnimationFrame(animate);\r\n        return;\r\n      }\r\n\r\n      // Update mouse position with smoothing\r\n      const targetX = mouse.current.x;\r\n      const targetY = mouse.current.y;\r\n      const current = trail.current[0] || { x: targetX, y: targetY };\r\n      \r\n      const newX = current.x + (targetX - current.x) * speed;\r\n      const newY = current.y + (targetY - current.y) * speed;\r\n\r\n      // Add new trail point\r\n      trail.current.unshift({ x: newX, y: newY });\r\n\r\n      // Limit trail length\r\n      if (trail.current.length > trailLength) {\r\n        trail.current.pop();\r\n      }\r\n\r\n      // Clear and redraw with continuous color animation\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      drawTrail(ctx);\r\n\r\n      animationId.current = requestAnimationFrame(animate);\r\n    };\r\n\r\n    animate();\r\n\r\n    return () => {\r\n      cancelAnimationFrame(animationId.current);\r\n      window.removeEventListener(\"mousemove\", handleMouseMove);\r\n      window.removeEventListener(\"resize\", resize);\r\n    };\r\n  }, [resize, getContext, drawTrail, enabled, speed, trailLength]);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      className={cn(\r\n        \"fixed inset-0 z-[-1] blur-2xl h-screen w-screen pointer-events-none\",\r\n        className\r\n      )}\r\n    />\r\n  );\r\n}"
    }
  ],
  "dependencies": [
    "next",
    "react"
  ],
  "devDependencies": [],
  "registryDependencies": [
    "utils"
  ],
  "meta": {
    "source": "https://www.instagram.com/reel/DSR2twIDEsu",
    "category": "Hover Effects",
    "contributor": {
      "name": "nerdboi008",
      "github": "https://github.com/NerdBoi008",
      "x": "https://x.com/moin_malek_",
      "website": "https://www.nerdboi.online"
    }
  }
}